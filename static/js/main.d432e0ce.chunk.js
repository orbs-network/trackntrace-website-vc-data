(this.webpackJsonppgdashboard=this.webpackJsonppgdashboard||[]).push([[0],{101:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),o=a.n(i);a(101),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,c,s,u,m,p=a(22),d=a(45),g=a.n(d),b=a(61),h=a(18),f=a(14),y=a(11),v=a(9),E=(a(50),a(6)),O=["Factory","Mixing","Distribution","Retail"],w={Factory:"Factory",Mixing:"Mixing Center",Distribution:"Distribution Center",Retail:"Retail"},j=function(){function e(t){Object(f.a)(this,e),this.raw=t}return Object(y.a)(e,[{key:"itemId",value:function(){return this.raw.ProductID}},{key:"timestampInSeconds",value:function(){return this.timestampInMilliseconds()/1e3}},{key:"timestampInMilliseconds",value:function(){return this.raw.EventTimeUTCMS}},{key:"timestampAsDate",value:function(){return new Date(this.timestampInMilliseconds())}},{key:"partner",value:function(){return this.raw.BusinessParty}},{key:"stage",value:function(){var e=this;return O.find((function(t){return e.raw.BusinessLocationID.toLowerCase().replace(/\s/g,"").includes(t.toLowerCase().replace(/\s/g,""))}))||this.raw.BusinessLocationID}},{key:"recordId",value:function(){var e;return(e=JSON.stringify(this.raw),Math.abs(e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0))).toString()}},{key:"location",value:function(){return this.raw.BusinessLocationID}},{key:"isOperatorAvailable",value:function(){return"p&g"==this.partner().toLowerCase()}},{key:"operatorFullName",value:function(){return"John Doe"}}]),e}(),D=(l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;Object(f.a)(this,e),Object(h.a)(this,"ready",c,this),Object(h.a)(this,"err",s,this),Object(h.a)(this,"records",u,this),this.init(t)}return Object(y.a)(e,[{key:"init",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n,r,i=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Date.now(),e.next=4,this.fetch();case 4:n=Math.max(0,800-(Date.now()-a)),setTimeout((function(){return i.ready=!0}),n),(r=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.fetch();case 3:setTimeout(r,t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i.err=e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}())(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.err=e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(Object(b.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"https://orbs-network.github.io/trackntrace-website-vc-data",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_URL:"/trackntrace-website-vc-data"}).REACT_APP_RECORDS_URL||"https://png-collector.herokuapp.com/getAllEvents");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,null!=this.records&&a.length==this.records.length||(this.records=a.filter((function(e){return"[object Object]"!=e.msg})).filter((function(e){return null!=e.EventTimeUTC})).map((function(e){return new j(e)})));case 7:case"end":return e.stop()}}),e,this)}))))}]),e}(),c=Object(v.a)(l.prototype,"ready",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=Object(v.a)(l.prototype,"err",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=Object(v.a)(l.prototype,"records",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l),I=a(17),k=(m=function(){function e(t){Object(f.a)(this,e),this.recordsStore=t}return Object(y.a)(e,[{key:"itemPipelineTimeInSeconds",value:function(e){return Date.now()/1e3-I.min(this.itemRecords(e).map((function(e){return e.timestampInSeconds()})))}},{key:"itemRecords",value:function(e){return this.recordsStore.records.filter((function(t){return t.itemId()==e}))}},{key:"itemRecordsSortedByTime",value:function(e){return I.sortBy(this.itemRecords(e),(function(e){return e.timestampInMilliseconds()}))}},{key:"avgRecordsPerItem",get:function(){return I.chain(this.recordsStore.records).groupBy((function(e){return e.itemId()})).values().map((function(e){return e.length})).mean().value()||0}},{key:"avgPiplineTimePerItemInDays",get:function(){return this.avgPiplineTimePerItemInSeconds/60/60/24}},{key:"avgPiplineTimePerItemInSeconds",get:function(){var e=Date.now()/1e3;return I.chain(this.recordsStore.records).groupBy((function(e){return e.itemId()})).mapValues((function(t){return e-I.min(t.map((function(e){return e.timestampInSeconds()})))})).map((function(e){return Math.max(e,0)})).mean().value()||0}},{key:"itemUIDs",get:function(){return I.chain(this.recordsStore.records).map((function(e){return e.itemId()})).uniq().value()}},{key:"latestRecordsPerItem",get:function(){return I.chain(this.recordsStore.records).groupBy((function(e){return e.itemId()})).mapValues((function(e){return I.maxBy(e,(function(e){return e.timestampInSeconds()}))})).values().value()}},{key:"itemCountByPartner",get:function(){return I.chain(this.latestRecordsPerItem).groupBy((function(e){return e.partner()})).mapValues((function(e){return e.length})).value()}},{key:"itemCountByStage",get:function(){return I.chain(this.latestRecordsPerItem).groupBy((function(e){return e.stage()})).mapValues((function(e){return e.length})).value()}},{key:"alerts",get:function(){return this.repeatedScanAlerts.concat(this.tooManyScansAlerts).concat(this.adjacentScansAlert)}},{key:"alertedItems",get:function(){return I.uniq(this.alerts.map((function(e){return e.itemId})))}},{key:"repeatedScanAlerts",get:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var r,i=this.itemUIDs[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)for(var o=r.value,l={},c=this.itemRecordsSortedByTime(o),s=0;s<c.length;s++){var u=c[s],m=u.location();if(null!=l[m]&&l[m]<s-1){var p=c[l[m]];e.push({timestamp:u.timestampAsDate(),alertType:"Repeated Scan",itemId:u.itemId(),location:u.location(),prevTime:p.timestampAsDate()});break}l[u.location()]=s}}catch(d){a=!0,n=d}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}},{key:"adjacentScansAlert",get:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var r,i=this.itemUIDs[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)for(var o=r.value,l=this.itemRecordsSortedByTime(o),c=1;c<l.length;c++){var s=l[c],u=l[c].timestampInMilliseconds()-l[c-1].timestampInMilliseconds();if(l[c].location()!=l[c-1].location()&&u<9e5){e.push({timestamp:s.timestampAsDate(),alertType:"Adjacent Scans",itemId:s.itemId(),deltaInMs:u});break}}}catch(m){a=!0,n=m}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}},{key:"tooManyScansAlerts",get:function(){var e=this;return this.itemUIDs.map((function(t){return e.itemRecordsSortedByTime(t)})).filter((function(e){return e.length>10})).map((function(e){return{timestamp:e[10].timestampAsDate(),alertType:"Too Many Scans",itemId:e[0].itemId(),count:e.length}}))}}]),e}(),Object(v.a)(m.prototype,"avgRecordsPerItem",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"avgRecordsPerItem"),m.prototype),Object(v.a)(m.prototype,"avgPiplineTimePerItemInDays",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"avgPiplineTimePerItemInDays"),m.prototype),Object(v.a)(m.prototype,"avgPiplineTimePerItemInSeconds",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"avgPiplineTimePerItemInSeconds"),m.prototype),Object(v.a)(m.prototype,"itemUIDs",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"itemUIDs"),m.prototype),Object(v.a)(m.prototype,"latestRecordsPerItem",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"latestRecordsPerItem"),m.prototype),Object(v.a)(m.prototype,"itemCountByPartner",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"itemCountByPartner"),m.prototype),Object(v.a)(m.prototype,"itemCountByStage",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"itemCountByStage"),m.prototype),Object(v.a)(m.prototype,"alerts",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"alerts"),m.prototype),Object(v.a)(m.prototype,"alertedItems",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"alertedItems"),m.prototype),Object(v.a)(m.prototype,"repeatedScanAlerts",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"repeatedScanAlerts"),m.prototype),Object(v.a)(m.prototype,"adjacentScansAlert",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"adjacentScansAlert"),m.prototype),Object(v.a)(m.prototype,"tooManyScansAlerts",[E.f],Object.getOwnPropertyDescriptor(m.prototype,"tooManyScansAlerts"),m.prototype),m);var S=a(19),x=a(20),P=a(21),T=a(68),R=a(39),A=a(13),C=a(163),M=a(154),B=a(160),z=a(156),N=a(161),U=a(150);function L(e){return"/trackntrace-website-vc-data"+{amazon:"/amazon.png","p&g":"/png.png",fedex:"/fedex.png",dhl:"/dhl.png"}[e.toLowerCase()]||!1}function W(e){return"/trackntrace-website-vc-data"+{factory:"/factory.svg",mixing:"/mixingcenter.svg",distribution:"/distributioncenter.svg",retail:"/retailstorage.svg"}[e.toLowerCase().replace(/\s/g,"")]||!1}var F,_,H,V,K,q,J,Y,X,G,$,Q,Z,ee,te,ae,ne,re,ie,oe,le,ce=a(82),se=a.n(ce),ue=a(83),me=a.n(ue),pe=a(151),de=a(165),ge=a(157),be=a(155),he=function(e){return(e<10?"0":"")+e.toString()},fe=Object(p.b)("statistics")(F=Object(p.c)((_=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r))),Object(h.a)(a,"selectedItemUID",H,Object(A.a)(a)),Object(h.a)(a,"ready",V,Object(A.a)(a)),Object(h.a)(a,"pageSize",K,Object(A.a)(a)),Object(h.a)(a,"currentPage",q,Object(A.a)(a)),a.currentTimeoutHandle=void 0,Object(h.a)(a,"retrievingDetails",J,Object(A.a)(a)),Object(h.a)(a,"operatorDetails",Y,Object(A.a)(a)),Object(h.a)(a,"scanRecordForOperatorRetreival",X,Object(A.a)(a)),a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadData(),Object(E.n)((function(){return e.selected}),(function(){return e.loadData()}))}},{key:"loadData",value:function(){var e=this;this.selected&&(this.ready=!1,this.currentTimeoutHandle&&clearTimeout(this.currentTimeoutHandle),this.currentTimeoutHandle=setTimeout((function(){e.ready=!0,e.currentTimeoutHandle=null}),1e3))}},{key:"componentWillUnmount",value:function(){this.currentTimeoutHandle&&clearTimeout(this.currentTimeoutHandle)}},{key:"render",value:function(){var e=this,t=this.props.statistics.itemRecords(this.selected);return r.a.createElement("div",{style:{margin:"30px"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{display:"inline-block",fontWeight:"bold",fontSize:21,padding:"32px 15px 32px 0"}},"Search an item:"),this.props.statistics.itemUIDs.length>0&&r.a.createElement(N.a,{options:this.props.statistics.itemUIDs,getOptionLabel:function(e){return e},style:{width:300},filterOptions:Object(U.a)({matchFrom:"start"}),onChange:function(t,a){e.selectedItemUID=a,e.loadData()},value:null==this.selectedItemUID?this.selected:this.selectedItemUID,renderInput:function(e){return r.a.createElement(C.a,Object.assign({},e,{label:"Item UID",variant:"outlined"}))}}),!this.ready&&r.a.createElement(M.a,{style:{marginLeft:20}})),null!=this.selected&&this.ready&&r.a.createElement("div",{style:{borderRadius:4,border:"solid 1px #ebedf8",backgroundColor:"#f8f8f8",padding:37,display:"flex",flexDirection:"row",marginRight:30,overflow:"auto"}},r.a.createElement("div",null,r.a.createElement("div",{style:{fontSize:19,color:"#1a173b",letterSpacing:.13,paddingBottom:12}},"Item UID"),r.a.createElement("div",{style:{color:"#484848",fontSize:15}},this.selected)),r.a.createElement("div",null,r.a.createElement("table",{className:"item-table",style:{paddingLeft:40}},r.a.createElement("tr",{style:{fontSize:15,letterSpacing:.1,color:"#5e6e7b"}},r.a.createElement("td",null,"Brand"),r.a.createElement("td",null,"Description"),r.a.createElement("td",null,"Catalog No."),r.a.createElement("td",null,"Time in pipeline"),r.a.createElement("td",null,"Status")),r.a.createElement("tr",{style:{fontSize:16,color:"#060606"}},r.a.createElement("td",null,"Gillette"),r.a.createElement("td",null,"Razor Package 135Xg"),r.a.createElement("td",null,"1225434DLX"),r.a.createElement("td",null,Math.floor(this.props.statistics.itemPipelineTimeInSeconds(this.selected)/60/60/24)," days"),r.a.createElement("td",{style:{fontWeight:"bold",fontSize:16,color:"#769806"}},"OK"))))),this.selected&&this.ready&&r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline-block",fontWeight:"bold",fontSize:21,padding:"32px 15px 32px 0",borderBottom:"solid 0.5px #ebedf8",width:"100%"}},"Item history"),r.a.createElement("div",null,r.a.createElement("div",{className:"item-history-table"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,"Partner"),r.a.createElement("td",null,"Stage"),r.a.createElement("td",null,"Date"),r.a.createElement("td",null,"Time"),r.a.createElement("td",null,"Status"),r.a.createElement("td",null,"Comments"),r.a.createElement("td",null,"Operator")),I.sortBy(t.slice(this.pageSize*this.currentPage,this.pageSize*(this.currentPage+1)),(function(e){return-e.timestampInSeconds()})).map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{className:"record-id-cell"},"Record ",t.recordId()),r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement("div",{style:{verticalAlign:"middle",width:30,height:30,backgroundImage:"url(".concat(L(t.partner()),")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",whiteSpace:"nowrap",backgroundPosition:"center",display:"inline-block"}}),"\xa0\xa0\xa0",t.partner()),r.a.createElement("td",null,r.a.createElement("img",{src:W(t.stage()),style:{verticalAlign:"middle",width:20,height:20}}),"\xa0\xa0\xa0",w[t.stage()]),r.a.createElement("td",null,"".concat(he(t.timestampAsDate().getDate())," ").concat(t.timestampAsDate().toLocaleString("default",{month:"short"}),", ").concat(t.timestampAsDate().getFullYear())),r.a.createElement("td",null,"".concat(he(t.timestampAsDate().getHours()),":").concat(he(t.timestampAsDate().getMinutes()))),r.a.createElement("td",{className:"status-cell"},r.a.createElement("div",null,"OK")),r.a.createElement("td",{style:{color:"grey",fontWeight:"normal",textAlign:"center"}},"N/A"),r.a.createElement("td",{style:{textAlign:"center"}},t.isOperatorAvailable()?r.a.createElement(pe.a,{onClick:function(){return e.openOperatorRetreivalDialog(t)},style:{padding:0}},r.a.createElement(se.a,null)):r.a.createElement(me.a,null)))}))),r.a.createElement(B.a,{rowsPerPageOptions:[5,10],component:"div",count:t.length,rowsPerPage:this.pageSize,page:this.currentPage,onChangePage:function(t,a){return e.currentPage=a},onChangeRowsPerPage:function(t){e.pageSize=parseInt(t.target.value)}}),this.isOperatorDialogOpen()&&r.a.createElement(de.a,{onClose:function(){return e.closeOperatorDialog()},"aria-labelledby":"Scan Operator Details",open:this.isOperatorDialogOpen()},r.a.createElement("div",{style:{fontSize:20,fontWeight:"bold",margin:20}},"Scan Operator Details"),r.a.createElement(be.a,{style:{textAlign:"left"}},"You are attempting to retrieve operator details of scan ",this.scanRecordForOperatorRetreival.recordId(),". Are you sure?",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Note - this action will be logged!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"center"}},this.retrievingDetails?r.a.createElement(M.a,null):this.operatorDetails?r.a.createElement("span",null,"Full name: ",r.a.createElement("b",null,this.operatorDetails)):r.a.createElement(z.a,{variant:"contained",color:"secondary",onClick:function(){return e.retreiveOperatorDetails()}},"RETRIEVE OEPRATOR DETAILS")),r.a.createElement(ge.a,null,r.a.createElement(z.a,{autoFocus:!0,onClick:function(){return e.closeOperatorDialog()},color:"primary",style:{marginTop:20}},this.operatorDetails?"DONE":"CANCEL"))))))))}},{key:"retreiveOperatorDetails",value:function(){var e=this;this.retrievingDetails=!0,setTimeout((function(){e.retrievingDetails=!1,e.operatorDetails=e.scanRecordForOperatorRetreival.operatorFullName()}),3e3)}},{key:"openOperatorRetreivalDialog",value:function(e){this.scanRecordForOperatorRetreival=e}},{key:"closeOperatorDialog",value:function(){this.scanRecordForOperatorRetreival=null,this.operatorDetails=null}},{key:"isOperatorDialogOpen",value:function(){return null!=this.scanRecordForOperatorRetreival}},{key:"selected",get:function(){return null!=this.selectedItemUID?-1!=this.props.statistics.itemUIDs.indexOf(this.selectedItemUID)?this.selectedItemUID:null:this.props.statistics.itemUIDs[0]}}]),t}(r.a.Component),H=Object(v.a)(_.prototype,"selectedItemUID",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(v.a)(_.prototype,"ready",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=Object(v.a)(_.prototype,"pageSize",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),q=Object(v.a)(_.prototype,"currentPage",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=Object(v.a)(_.prototype,"retrievingDetails",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=Object(v.a)(_.prototype,"operatorDetails",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=Object(v.a)(_.prototype,"scanRecordForOperatorRetreival",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=_))||F)||F,ye=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).toRunOnMount=[],a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.toRunOnMount;this.toRunOnMount=null,e.forEach((function(e){return e()}))}},{key:"runOnMount",value:function(e){null==this.toRunOnMount?e():this.toRunOnMount.push(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.value,i=t.color,o=t.image,l=t.percent;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",margin:"0 3px"}},r.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",alignContent:"flex-end",paddingBottom:5}},r.a.createElement("div",{style:{flex:1}}),r.a.createElement("div",{style:{textAlign:"center",fontSize:24,paddingBottom:3}},n),r.a.createElement("div",{style:{backgroundColor:i,height:0,transition:"height 1s"},ref:function(t){return e.runOnMount((function(){setTimeout((function(){t&&(t.style.height="".concat(Math.ceil(100*l),"%"))}),10)}))}})),r.a.createElement("div",{style:{height:124*.6+10,width:114*.6,backgroundColor:"#e9e9e9",boxSizing:"border-box",display:"flex",flexDirection:"column",fontSize:9.6,color:"#060606",alignItems:"center"}},r.a.createElement("div",{style:{height:42,minHeight:42,width:42,minWidth:42,marginTop:12,backgroundImage:"url(".concat(o,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"}}),r.a.createElement("span",{style:{textAlign:"center",paddingTop:5,paddingBottom:12,wordBreak:"break-word"}},a)))}}]),t}(r.a.Component),ve=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.labels,a=e.values,n=e.colors,i=e.images,o=I.max(a);return r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"center"}},t.map((function(e,l){return r.a.createElement(ye,{label:t[l],value:a[l],image:i[l],color:n[l%n.length],percent:0==o?0:a[l]/o})})))}}]),t}(r.a.Component),Ee=Object(p.c)(($=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r))),Object(h.a)(a,"initDisplayedData",Q,Object(A.a)(a)),Object(h.a)(a,"finalDisplayedData",Z,Object(A.a)(a)),Object(h.a)(a,"initial",ee,Object(A.a)(a)),a.mounted=!1,a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"format",value:function(e){return this.props.decimals?"".concat(Math.floor(e),".").concat(Math.floor(10*e)%10):"".concat(e)}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.data||0,a=Date.now();!function n(){if(e.mounted){var r=Date.now()-a;r<1e3?(e.initDisplayedData=Math.floor(t*(r/1e3)),requestAnimationFrame(n)):(e.finalDisplayedData=t,e.initial=!1)}}()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidUpdate",value:function(){this.finalDisplayedData=this.props.data}},{key:"render",value:function(){return r.a.createElement("div",{className:"databox"},r.a.createElement("div",{className:"databox-title"},this.props.title),r.a.createElement("div",{className:"databox-infotext"},r.a.createElement("span",null,this.format(this.initial?this.initDisplayedData:this.finalDisplayedData)),this.props.subText&&r.a.createElement("div",{className:"databox-subtext"},r.a.createElement("span",null,this.props.subText))))}}]),t}(r.a.Component),Q=Object(v.a)($.prototype,"initDisplayedData",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=Object(v.a)($.prototype,"finalDisplayedData",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=Object(v.a)($.prototype,"initial",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=$))||G,Oe=[{name:"itemStatus",path:"/trackntrace-website-vc-data/item_status",menuImg:"/menu-item-status.svg",cssClass:"item-status",displayIndex:1,component:fe},{name:"overview",path:"/trackntrace-website-vc-data/",menuImg:"/menu-overview.svg",cssClass:"overview",displayIndex:0,component:Object(p.b)("statistics")(te=Object(p.c)((ae=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r))),Object(h.a)(a,"rowsPerPage",ne,Object(A.a)(a)),Object(h.a)(a,"page",re,Object(A.a)(a)),a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props.statistics.itemCountByPartner,a=I.reverse(Object.keys(Object(E.q)(t)).sort()),n=this.props.statistics.itemCountByStage,i=this.props.statistics.alerts.filter((function(e){return"Repeated Scan"==e.alertType})).length,o=this.props.statistics.alerts.filter((function(e){return"Too Many Scans"==e.alertType})).length,l=this.props.statistics.alerts.filter((function(e){return"Adjacent Scans"==e.alertType})).length,c=this.props.statistics.alerts.length;return r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,borderRight:"1px solid #ebedf8"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},r.a.createElement("div",{style:{flex:1,borderRight:"1px solid #ebedf8",marginTop:50}},r.a.createElement("div",{className:"title",style:{height:46,borderBottom:"1px solid #ebedf8",alignItems:"start"}},r.a.createElement("span",null,"Products by stage")),r.a.createElement("div",{style:{height:300,padding:20,marginLeft:50,borderBottom:"1px solid #ebedf8"}},r.a.createElement(ve,{colors:["#035093","#035093","#4889c2","#0a4171"],images:O.map((function(e){return W(e)})),labels:O.map((function(e){return w[e]})),values:O.map((function(e){return n[e]}))}))),r.a.createElement("div",{style:{flex:1,marginTop:50}},r.a.createElement("div",{className:"title",style:{height:46,borderBottom:"1px solid #ebedf8",alignItems:"start"}},r.a.createElement("span",null,"Products by partner")),r.a.createElement("div",{style:{height:300,padding:20,borderBottom:"1px solid #ebedf8"}},r.a.createElement(ve,{colors:["#bb8888","#a37878","#d19d9d","#bb8888"],images:a.map((function(e){return L(e)})),labels:a,values:a.map((function(e){return t[e]}))})))),r.a.createElement("div",{style:{marginLeft:50}},r.a.createElement("div",{style:{height:50,borderBottom:"1px solid #ebedf8",display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("img",{src:"/trackntrace-website-vc-data/alert.svg",alt:"alert",style:{padding:"0 10px"}})," ",r.a.createElement("span",null,"Alerts")),c>0?r.a.createElement("div",{className:"alerts"},r.a.createElement("ul",null,i>0&&r.a.createElement("li",null,r.a.createElement("b",null,i)," item",i>1?"s were":" was"," rescanned in a previous location (",r.a.createElement("i",null,"Repeated-Scan-Alert"),")"),o>0&&r.a.createElement("li",null,r.a.createElement("b",null,o)," item",o>1?"s were":" was"," scanned more than ",10," times (",r.a.createElement("i",null,"Too-Many-Scans-Alert"),")"),l>0&&r.a.createElement("li",null,r.a.createElement("b",null,l)," item",l>1?"s were":" was"," scanned in two or more different locations within a period of less than ",15," minutes (",r.a.createElement("i",null,"Adjacent-Scans-Alert"),")")),r.a.createElement("table",{className:"alerts-table"},r.a.createElement("tr",null,r.a.createElement("td",null,"TIMESTAMP"),r.a.createElement("td",null,"ALERT TYPE"),r.a.createElement("td",null,"ITEM ID"),r.a.createElement("td",null,"DESCRIPTION")),I.sortBy(this.props.statistics.alerts,(function(e){return-e.timestamp.getTime()})).slice(this.page*this.rowsPerPage,(this.page+1)*this.rowsPerPage).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.timestamp.toDateString()),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.alertType),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.itemId),r.a.createElement("td",{style:{width:"100%"}},"Repeated Scan"==e.alertType?r.a.createElement("span",null," Item was scanned twice at location ",r.a.createElement("i",null,e.location)," (previous scan was at ",e.prevTime.toDateString(),")"):"Too Many Scans"==e.alertType?r.a.createElement("span",null," Item was scanned ",r.a.createElement("b",null,e.count)," times"):"Adjacent Scans"==e.alertType?r.a.createElement("span",null," Detected two consecutive scans in different locations in under ",r.a.createElement("b",null,Math.ceil(e.deltaInMs/1e3/60))," minutes."):r.a.createElement("span",null)))}))),r.a.createElement(B.a,{rowsPerPageOptions:[5,10],component:"div",count:this.props.statistics.alerts.length,rowsPerPage:this.rowsPerPage,page:this.page,onChangePage:function(t,a){return e.page=a},onChangeRowsPerPage:function(t){e.rowsPerPage=parseInt(t.target.value)}})):r.a.createElement("div",{style:{color:"#bebebe",margin:10}},"- None -"))),r.a.createElement("div",{style:{letterSpacing:1.13,fontSize:19}},this.renderDataSection()))}},{key:"renderDataSection",value:function(){var e=this.props.statistics;return r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"title",style:{height:96,width:"100%",borderBottom:"1px solid #ebedf8"}},r.a.createElement("span",{style:{marginTop:22}},"Data")),r.a.createElement("div",{style:{margin:"30px 30px 0 30px"}},r.a.createElement("table",{className:"data-table"},r.a.createElement("tr",null,r.a.createElement("td",{className:"border-right border-bottom"},r.a.createElement(Ee,{title:"Alerted Products",data:e.alertedItems.length})),r.a.createElement("td",{className:"border-left border-bottom"},r.a.createElement(Ee,{title:"Avg. Time in pipeline",data:e.avgPiplineTimePerItemInDays,subText:"DAYS",decimals:1}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"border-right border-top"},r.a.createElement(Ee,{title:"Suspected counterfeit",data:0})),r.a.createElement("td",{className:"border-left border-top"},r.a.createElement(Ee,{title:"Avg. scans per item",data:e.avgRecordsPerItem,decimals:1})))),r.a.createElement("div",{style:{borderBottom:"1px solid #ebedf8",height:0}}),r.a.createElement("div",{style:{fontSize:16,color:"#060606",margin:"70px 0 40px"}},"Items Location"),r.a.createElement("img",{src:"/trackntrace-website-vc-data/worldmap.svg",style:{width:"100%"},alt:"Route tracking"})))}}]),t}(r.a.Component),ne=Object(v.a)(ae.prototype,"rowsPerPage",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),re=Object(v.a)(ae.prototype,"page",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=ae))||te)||te}];function we(){return Oe.find((function(e){return e.path==window.location.pathname}))||Oe[Oe.length-1]}function je(e){var t=e.onClick,a=e.className,n=Object(R.f)();return r.a.createElement("div",{onClick:function(){return t(n)},style:{width:"100%",boxSizing:"border-box",margin:30},className:a})}var De,Ie,ke,Se,xe=Object(p.c)((oe=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r))),Object(h.a)(a,"currentRoute",le,Object(A.a)(a)),a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=function(t){return"menu-item menu-item-".concat(t.cssClass," ").concat(e.currentRoute.name==t.name?"selected":"")};return r.a.createElement("div",{className:"side-menu",style:{height:"100%",width:"100%"}},r.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n                .side-menu .menu-item-overview {\n                    background-image: url(".concat("/trackntrace-website-vc-data","/menu-overview.svg);\n                }\n\n                .side-menu .menu-item-overview.selected{\n                    background-image: url(").concat("/trackntrace-website-vc-data","/menu-overview-selected.svg);\n                    border-right: 3px solid #3e4d73;\n                }\n\n                .side-menu .menu-item-overview:hover{\n                    background-image: url(").concat("/trackntrace-website-vc-data","/menu-overview-hovered.svg);\n                }\n\n                .side-menu .menu-item-item-status {\n                    background-image: url(").concat("/trackntrace-website-vc-data","/menu-item-status.svg);\n                }\n\n                .side-menu .menu-item-item-status.selected{\n                    background-image: url(").concat("/trackntrace-website-vc-data","/menu-item-status-selected.svg);\n                    border-right: 3px solid #3e4d73;\n                }\n\n                .side-menu .menu-item-item-status:hover{\n                    background-image: url(").concat("/trackntrace-website-vc-data","/menu-item-status-hovered.svg);\n                }\n            ")}}),r.a.createElement("div",{className:"side-menu-orbs",style:{padding:30,marginBottom:20}},r.a.createElement("img",{style:{height:32,width:32},src:"/trackntrace-website-vc-data/orbs-logo.svg"})),I.sortBy(Oe,(function(e){return e.displayIndex})).map((function(a){return r.a.createElement(je,{onClick:function(t){return e.navigateTo(a,t)},className:t(a)})})))}},{key:"navigateTo",value:function(e,t){t.push(e.path),this.currentRoute=e}},{key:"componentDidMount",value:function(){var e=this;window.onpopstate=function(){return e.currentRoute=we()}}},{key:"componentWillUnmount",value:function(){window.onpopstate=null}}]),t}(r.a.Component),le=Object(v.a)(oe.prototype,"currentRoute",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return we()}}),ie=oe))||ie,Pe=Object(p.c)((Ie=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r))),Object(h.a)(a,"loadingCaption",ke,Object(A.a)(a)),a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-page"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("div",{style:{height:"100%",width:"100%",textAlign:"center"}},r.a.createElement("img",{className:"orbs-logo",src:"/trackntrace-website-vc-data/orbs-logo.svg"})),r.a.createElement("div",{className:"loading-lbl"},this.loadingCaption)))}},{key:"componentDidMount",value:function(){var e=this,t=0;setInterval((function(){e.loadingCaption="Loading"+I.range(t).map((function(){return"."})).join(""),t=(t+1)%4}),500)}}]),t}(r.a.Component),ke=Object(v.a)(Ie.prototype,"loadingCaption",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Loading..."}}),De=Ie))||De,Te=a(162),Re=a(158),Ae=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"left"}},r.a.createElement(Te.a,{severity:"error"},r.a.createElement(Re.a,null,"Error"),"We were unable to load the page at the moment. Please try again. ",r.a.createElement("br",null),r.a.createElement("span",{style:{color:"#bebebe"}},r.a.createElement("pre",null,"Error: ",this.props.err.toString()))))}}]),t}(r.a.Component),Ce=Object(p.b)("records")(Se=Object(p.c)(Se=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return this.props.records.ready?r.a.createElement(T.a,null,r.a.createElement("div",{style:{height:"100%",width:"100%",maxWidth:2e3,display:"inline-block",position:"relative",textAlign:"left"}},r.a.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,width:89}},r.a.createElement(xe,null)),r.a.createElement("div",{style:{position:"absolute",top:0,left:90,bottom:0,right:0,overflow:"auto",borderRight:"1px solid #ebedf8"}},r.a.createElement(R.c,null,Oe.map((function(e){var t=e.component;return r.a.createElement(R.a,{path:e.path},r.a.createElement(t,null))})))))):this.props.records.err?r.a.createElement(Ae,{err:this.props.records.err}):r.a.createElement(Pe,null)}}]),t}(r.a.Component))||Se)||Se,Me=function(){var e=new D;return{records:e,statistics:new k(e)}}();window.stores=Me,o.a.render(r.a.createElement(p.a,Me,r.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t,a){e.exports=a(110)}},[[96,1,2]]]);
//# sourceMappingURL=main.d432e0ce.chunk.js.map